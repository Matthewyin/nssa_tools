runConfig:
  runtime: nodejs18
  cpu: 1
  memory: 1Gi
  maxInstances: 10
  minInstances: 0
  concurrency: 100

  env:
    - variable: NODE_ENV
      value: production
    - variable: NITRO_PRESET
      value: firebase

    # Firebase Admin配置（私有）
    - variable: FIREBASE_ADMIN_PRIVATE_KEY
      secret: firebase-admin-private-key
    - variable: FIREBASE_ADMIN_CLIENT_EMAIL
      secret: firebase-admin-client-email
    - variable: FIREBASE_ADMIN_PROJECT_ID
      secret: firebase-admin-project-id

    # Firebase客户端配置（公共）
    - variable: FIREBASE_API_KEY
      secret: firebase-api-key
    - variable: FIREBASE_AUTH_DOMAIN
      secret: firebase-auth-domain
    - variable: FIREBASE_PROJECT_ID
      secret: firebase-project-id
    - variable: FIREBASE_STORAGE_BUCKET
      secret: firebase-storage-bucket
    - variable: FIREBASE_MESSAGING_SENDER_ID
      secret: firebase-messaging-sender-id
    - variable: FIREBASE_APP_ID
      secret: firebase-app-id

buildConfig:
  runtime: nodejs18
  commands:
    - npm ci
    - npm run build
